
 <div class="max-w-4xl mx-auto p-6 bg-white rounded-xl shadow-md space-y-6">
  <!-- Listing Header -->
  <div class="md:flex md:items-center md:justify-between md:space-x-5">
    <div class="flex items-start space-x-5">
      <div class="shrink-0">
        <div class="relative">
        <%= image_tag @listing.photos[0], class: "mx-auto size-32 shrink-0 rounded-lg object-cover" if @listing.photos.present? %>
        <span aria-hidden="true" class="absolute inset-0 rounded-full shadow-inner"></span>
        </div>
      </div>
      <div class="pt-1.5">
        <h1 class="text-2xl font-bold text-gray-900"><%= @listing.location %></h1>
        <p class="text-sm text-gray-500"><%= @listing.description %></p>
      </div>
    </div>
    <!-- Action buttons for owner -->
    <div class="mt-6 flex flex-col-reverse justify-stretch space-y-4 space-y-reverse sm:flex-row-reverse sm:justify-end sm:space-y-0 sm:space-x-3 sm:space-x-reverse md:mt-0 md:flex-row md:space-x-3">
      <%= link_to "Edit Listing",
        edit_listing_path(@listing),
        class: "inline-flex items-center justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-xs ring-1 ring-gray-300 ring-inset hover:bg-gray-50" %>
      <%= link_to "New Booking",
        new_listing_booking_path(@listing),
        class: "inline-flex items-center justify-center rounded-md bg-rose-600 px-3 py-2 text-sm font-semibold text-white shadow-xs hover:bg-rose-500 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-rose-600" %>
    </div>
  </div>

  <!-- Bookings Section -->
  <div class="border-t border-gray-200 pt-6">
    <h2 class="text-lg font-semibold text-gray-900 mb-4">Bookings</h2>
    <% if @listing.bookings.any? %>
      <% @listing.bookings.each do |booking| %>
        <div class="py-4 border-b border-gray-100">
          <p class="text-gray-800">Booking from <span class="font-semibold"><%= booking.user.email %></span></p>
          <p class="text-gray-600 text-sm">Dates: <%= booking.start_date %> to <%= booking.end_date %></p>
          <% if booking.confirmed? %>
            <p class="text-green-600 font-semibold mt-2">✅ Confirmed Booking</p>
          <% elsif booking.denied? %>
            <p class="text-red-600 font-semibold mt-2">❌ Denied Booking</p>
          <% else %>
            <div class="mt-3 flex gap-2">
              <%= link_to "Confirm",
                booking_path(booking, booking: { status: :confirmed }),
                data: { turbo_method: :patch },
                class: "inline-flex items-center justify-center rounded-md bg-green-600 px-3 py-1 text-sm font-semibold text-white shadow-xs hover:bg-green-500" %>
              <%= link_to "Deny",
                booking_path(booking, booking: { status: :denied }),
                data: { turbo_method: :patch },
                class: "inline-flex items-center justify-center rounded-md bg-red-600 px-3 py-1 text-sm font-semibold text-white shadow-xs hover:bg-red-500" %>
            </div>
          <% end %>
        </div>
      <% end %>
    <% else %>
      <p class="text-gray-500 text-sm">No bookings yet.</p>
    <% end %>
  </div>
</div>
